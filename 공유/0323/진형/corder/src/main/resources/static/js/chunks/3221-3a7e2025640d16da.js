"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3221],{21318:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2784);let ForwardRef=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function({title,titleId,...props},svgRef){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:svgRef,"aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"}))});__webpack_exports__.Z=ForwardRef},8676:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2784);let ForwardRef=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function({title,titleId,...props},svgRef){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:svgRef,"aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"}))});__webpack_exports__.Z=ForwardRef},36519:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return Menu}});var jsx_runtime=__webpack_require__(52322),react=__webpack_require__(2784);let ForwardRef=react.forwardRef(function({title,titleId,...props},svgRef){return react.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:svgRef,"aria-labelledby":titleId},props),title?react.createElement("title",{id:titleId},title):null,react.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"}))});var CogIcon=__webpack_require__(87457);let BuildingOfficeIcon_ForwardRef=react.forwardRef(function({title,titleId,...props},svgRef){return react.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:svgRef,"aria-labelledby":titleId},props),title?react.createElement("title",{id:titleId},title):null,react.createElement("path",{fillRule:"evenodd",d:"M4.5 2.25a.75.75 0 000 1.5v16.5h-.75a.75.75 0 000 1.5h16.5a.75.75 0 000-1.5h-.75V3.75a.75.75 0 000-1.5h-15zM9 6a.75.75 0 000 1.5h1.5a.75.75 0 000-1.5H9zm-.75 3.75A.75.75 0 019 9h1.5a.75.75 0 010 1.5H9a.75.75 0 01-.75-.75zM9 12a.75.75 0 000 1.5h1.5a.75.75 0 000-1.5H9zm3.75-5.25A.75.75 0 0113.5 6H15a.75.75 0 010 1.5h-1.5a.75.75 0 01-.75-.75zM13.5 9a.75.75 0 000 1.5H15A.75.75 0 0015 9h-1.5zm-.75 3.75a.75.75 0 01.75-.75H15a.75.75 0 010 1.5h-1.5a.75.75 0 01-.75-.75zM9 19.5v-2.25a.75.75 0 01.75-.75h4.5a.75.75 0 01.75.75v2.25a.75.75 0 01-.75.75h-4.5A.75.75 0 019 19.5z",clipRule:"evenodd"}))});var next_link=__webpack_require__(41664),link_default=__webpack_require__.n(next_link),router=__webpack_require__(11163),concat=__webpack_require__(86922),context=__webpack_require__(11712);function Menu(){let menu=function(){let{state:{isCompany}}=(0,context.k)(),{pathname}=(0,router.useRouter)();return(0,react.useMemo)(()=>{let DEFAULT_SIGNED_USER_MENU_ITEMS=[{url:"/settings/profile",label:"회원정보",icon:ForwardRef,current:pathname.endsWith("/settings")||pathname.startsWith("/settings/profile")},{url:"/settings/account",label:"계정",icon:CogIcon.Z,current:pathname.startsWith("/settings/account")}],COMPANY_USER_ONLY_MENU_ITEMS=[{url:"/settings/company",label:"회사정보",icon:BuildingOfficeIcon_ForwardRef,current:pathname.startsWith("/settings/company")}];return isCompany?[...DEFAULT_SIGNED_USER_MENU_ITEMS,...COMPANY_USER_ONLY_MENU_ITEMS]:DEFAULT_SIGNED_USER_MENU_ITEMS},[pathname,isCompany])}();return(0,jsx_runtime.jsx)("nav",{className:"my-4 space-y-2 lg:my-10",children:menu.map(item=>(0,jsx_runtime.jsxs)(link_default(),{href:item.url,className:(0,concat.z)(item.current?"bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-200":"text-gray-500","group flex items-center rounded-md px-3 py-2 font-medium hover:bg-gray-200 hover:text-gray-800 dark:hover:bg-gray-700 dark:hover:text-gray-300"),"aria-current":item.current?"page":void 0,children:[(0,jsx_runtime.jsx)(item.icon,{className:(0,concat.z)(item.current?"text-gray-600 dark:text-gray-400":" text-gray-400 dark:text-gray-600","-ml-1 mr-3 h-6 w-6 shrink-0 group-hover:text-gray-800 dark:group-hover:text-gray-200"),"aria-hidden":"true"}),(0,jsx_runtime.jsx)("span",{className:"truncate",children:item.label})]},item.label))})}},81721:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return useSettingsRouter}});var next_router__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11163),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2784);function useSettingsRouter(){let{replace,reload}=(0,next_router__WEBPACK_IMPORTED_MODULE_0__.useRouter)(),moveToPasswordChangesCompletionPage=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{replace("/settings/password-changes-completion")},[replace]);return{reload,moveToPasswordChangesCompletionPage}}},43707:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Iy:function(){return InfoAlert},SU:function(){return GrayAlert},WY:function(){return WarningAlert},hW:function(){return ErrorAlert}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(52322),_heroicons_react_24_solid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(21318),_heroicons_react_24_solid__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8676);function ErrorAlert(param){let{title,children}=param;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"rounded-md border border-red-100 bg-blue-50 p-4 dark:border-red-700 dark:bg-red-700/50",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex-shrink-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_heroicons_react_24_solid__WEBPACK_IMPORTED_MODULE_1__.Z,{className:"h-5 w-5 text-red-800 dark:text-red-200","aria-hidden":"true"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"ml-3",children:[title&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mt-2 text-sm text-red-700 dark:text-red-200",children:children})]})]})})}function WarningAlert(param){let{title,children}=param;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"rounded-md border border-yellow-100 bg-blue-50 p-4 dark:border-yellow-700 dark:bg-yellow-700/50",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex-shrink-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_heroicons_react_24_solid__WEBPACK_IMPORTED_MODULE_1__.Z,{className:"h-5 w-5 text-yellow-800 dark:text-yellow-200","aria-hidden":"true"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"ml-3",children:[title&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"text-sm font-bold text-yellow-800 dark:text-yellow-200",children:title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-200",children:children})]})]})})}function InfoAlert(param){let{title,children}=param;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"rounded-md border border-blue-100 bg-blue-50 p-4 dark:border-blue-700 dark:bg-blue-700/50",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex-shrink-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_heroicons_react_24_solid__WEBPACK_IMPORTED_MODULE_2__.Z,{className:"h-5 w-5 text-blue-500","aria-hidden":"true"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"ml-3",children:[title&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"text-sm font-bold text-blue-800 dark:text-blue-200",children:title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mt-2 text-sm text-blue-700 dark:text-blue-200",children:children})]})]})})}function GrayAlert(param){let{title,children}=param;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"rounded-md border border-gray-100 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-700/50",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex-shrink-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_heroicons_react_24_solid__WEBPACK_IMPORTED_MODULE_2__.Z,{className:"h-5 w-5 text-blue-500","aria-hidden":"true"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"ml-3",children:[title&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mt-2",children:children})]})]})})}},36046:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return SubmitButton}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(52322),_spinner__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(73947);function SubmitButton(param){let{loadingText="Processing...",children,loading=!1,disabled=!1,onClick}=param;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",className:"inline-flex items-center space-x-2 rounded-md bg-blue-500 px-8 py-2 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-blue-600 disabled:bg-blue-500 disabled:opacity-40",disabled:loading||disabled,onClick:onClick,children:loading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_spinner__WEBPACK_IMPORTED_MODULE_1__.Z,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:loadingText})]}):children})}},21077:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return TagInput}});var jsx_runtime=__webpack_require__(52322),react=__webpack_require__(2784),react_select_async_creatable_esm=__webpack_require__(70414),context=__webpack_require__(56),okky_web=__webpack_require__(26697),dist=__webpack_require__(99058),dist_default=__webpack_require__.n(dist);function convertTagDtoToOption(tags){return tags.map(param=>{let{name=""}=param;return{value:name,label:name}})}function convertOptionToTagDto(tags){return tags.map(param=>{let{label}=param;return{name:label}})}let handleInputChange=dist_default()(async inputTag=>{let{result}=await (0,okky_web.getListByNameStartsWith)({name:inputTag});return result.map(param=>{let{name}=param;return{value:name,label:name}})},500);function TagInput(param){let{defaultValue=[],maxSelection=999,onChange,placeholder="스킬 태그를 선택해주세요.",noOptionsMessage="검색 된 태그가 없습니다."}=param,{handleInputChange:handleInputChange1,convertOptionToTagDto:convertOptionToTagDto1,convertTagDtoToOption:convertTagDtoToOption1}={handleInputChange,convertOptionToTagDto,convertTagDtoToOption},[value,setValue]=(0,react.useState)(convertTagDtoToOption1(defaultValue)),{state:{isDarkmode}}=(0,context.F)(),handleChanges=(0,react.useCallback)(tags=>{let newValue=tags.map(param=>{let{label,value}=param;return{label,value}});newValue.length>maxSelection||setValue(()=>(onChange(convertOptionToTagDto1(newValue)),newValue))},[onChange,convertOptionToTagDto1,maxSelection]);return(0,jsx_runtime.jsx)(react_select_async_creatable_esm.Z,{value:value,closeMenuOnSelect:!1,placeholder:placeholder,noOptionsMessage:()=>noOptionsMessage,defaultValue:convertTagDtoToOption1(defaultValue),loadOptions:handleInputChange1,isMulti:!0,maxMenuHeight:160,onChange:handleChanges,styles:{menu:base=>({...base,background:isDarkmode?"#374151 !important":"white !important",border:"1px solid rgba(107, 114, 128, 0.3) !important",cursor:"pointer"}),multiValueRemove:base=>({...base,color:"#374151 !important","&:hover":{background:isDarkmode?"#A5D1F6 !important":"#0090F9 !important"}}),loadingIndicator:base=>({...base,color:"#6b7280 !important"}),noOptionsMessage:base=>({...base,color:isDarkmode?"#f3f4f6 !important":"#111827 !important"}),loadingMessage:base=>({...base,color:isDarkmode?"#f3f4f6 !important":"#111827 !important"}),clearIndicator:base=>({...base,color:"#6b7280 !important","&:hover":{color:isDarkmode?"#A5D1F6 !important":"#0090F9 !important"}}),dropdownIndicator:base=>({...base,color:"#6b7280 !important","&:hover":{color:isDarkmode?"#A5D1F6 !important":"#0090F9 !important"}}),option(base,param){let{isFocused}=param;return{...base,color:isFocused?"#111827 !important":isDarkmode?"#f3f4f6 !important":"#111827 !important"}},control:base=>({...base,cursor:"pointer",minHeight:"42px",background:isDarkmode?"rgba(107, 114, 128, 0.2) !important":"white !important",border:"1px solid rgba(107, 114, 128, 0.3) !important",boxShadow:"0 1px 2px 0px rgb(0 0 0 / 0.05) !important","&:focus-within":{border:"1px solid rgba(107, 114, 128) !important"}}),input:base=>({"> input":{...base,cursor:"pointer",boxShadow:"0 0 0 0px !important"},paddingLeft:"2px"}),placeholder:base=>({...base,color:"rgba(107, 114, 128, 0.8)",position:"absolute"})}})}},4035:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{t:function(){return getErrorMessageByCode}});let OKKY_COMMON_ERROR_CODES={S001:"유효하지 않은 형식입니다.",S002:"Parameter로 잘못된 타입이나 PathVariable (/users/{id})값에 잘못된 타입의 값으로 요청한 경우",S003:"RequestBody요청시 잘못된 타입의 값으로(ex. boolean type을 String type값으로 입력)요청한 경우",S004:"지원하지 않는 Http Request Method로 요청한 경우",S005:"지원하지 않는 Media type으로 요청한 경우",S006:"요청에 필요한 권한을 보유하지 않은 경우",S007:"API 서버 오류",S008:"제대로된 JSON format이 아닌경우",S009:"파일 업로드 용량을 초과하였습니다.",C001:"Entity (user, article 등) 가 존재하지 않는 경우",C002:"Entity 의 Owner 가 아닌 경우 - Entity 수정 / 삭제 요청시 Entity 를 생성한 User id 또는 Avatar id 가 요청자 (AccessToken) 의 User id 또는 Avatar id 와 다른 경우",A001:"댓글이 존재하는 게시물은 삭제할 수 없습니다.",AVT001:"이미 사용되고 있는 닉네임입니다.",AVT002:"이미 사용되고 있는 이메일입니다.",COM001:"이미 사용되고 있는 회사 이름입니다.",E001:"이메일 링크가 만료되었습니다.",R001:"이미 내역이 존재하는 경우",U001:"로그인이 필요합니다.",U002:"인증되지 않은 계정입니다. 이메일 인증을 완료해 주시기 바랍니다.",U003:"이미 탈퇴한 유저입니다.",U004:"비밀번호가 일치하지 않습니다.",U005:"User 비밀번호 업데이트시 입력한 비밀번호와 새 비밀번호가 맞지 않은 경우",U006:"해당 이메일로 중복된 계정이 존재합니다. 관리자에게 문의해 주시기 바랍니다.",U007:"User OAuth2 정보를 삭제할 수 없는 경우 -> User SNS 회원가입으로 생성되고 연동된 SNS 계정이 1개인 경우",U008:"이미 사용되고 있는 아이디입니다."};function getErrorMessageByCode(code){return OKKY_COMMON_ERROR_CODES[code]}},63221:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return ProfilePage}});var jsx_runtime=__webpack_require__(52322),dist=__webpack_require__(55903),popover=__webpack_require__(90755),transition=__webpack_require__(46895),switch_switch=__webpack_require__(93313),ExclamationCircleIcon=__webpack_require__(17745),yup=__webpack_require__(96240),react=__webpack_require__(2784),index_esm=__webpack_require__(32439),es=__webpack_require__(24511),concat=__webpack_require__(86922),context=__webpack_require__(11712),browser_context=__webpack_require__(25273),footer=__webpack_require__(77684),header=__webpack_require__(18485),menu=__webpack_require__(36519),okky_web=__webpack_require__(26697),as=__webpack_require__(64612),get_error_message_by_code=__webpack_require__(4035),libs_picture=__webpack_require__(22018),use_settings_router=__webpack_require__(81721),shared_alert=__webpack_require__(43707),image_avatar=__webpack_require__(89746),submit_button=__webpack_require__(36046),tag_inputs=__webpack_require__(21077);let schema=es.Ry().shape({fullName:es.Z_().min(2,"이름은 최소 2자 이상으로 입력해주세요.").max(255,"이름은 최대 255자 이하로 입력해주세요.").required(),nickname:es.Z_().min(1,"닉네임은 최소 1자 이상으로 입력해주세요.").max(20,"닉네임은 최대 20자 이하로 입력해주세요.").required()}).required();function ProfilePage(){let{state:{avatar,fullName,displayImage,tags,dmAllowed=!1}}=(0,context.k)(),{alert}=(0,browser_context.G)(),{reload}=(0,use_settings_router.Z)(),{submitting,requestChangeProfile,error}=function(){let[submitting,setSubmitting]=(0,react.useState)(!1),[changed,setChanged]=(0,react.useState)(!1),[error,setError]=(0,react.useState)(),{state:{id:userId}}=(0,context.k)(),requestChangeProfile=(0,react.useCallback)(async body=>{if(setSubmitting(!0),setError(void 0),void 0===userId)throw Error("SHOULD BE LOGIN");let{result,ok}=await (0,okky_web.updateUser)(userId,{body});return ok&&result?(setSubmitting(!1),setChanged(!0),!0):(setSubmitting(!1),setError(function(error){let message="S001"===error.code?"이름과 닉네임은 알파벳, 한글, 숫자, 특수문자만 입력 가능합니다.":(0,get_error_message_by_code.t)(error.code);return(0,as.as)({...error,message})}((0,as.as)(result))),!1)},[userId]);return{error,submitting,requestChangeProfile,changed}}(),{profileImages,requestGravatarImageSet,requestAttachedImageSet,requestOAuthProviderImageSet,requestProfileImages,requestUploadedImageSet}=function(){let{state:{avatar},refreshProfile}=(0,context.k)(),[submitting,setSubmitting]=(0,react.useState)(!1),[error]=(0,react.useState)(),[profileImages,setProfileImages]=(0,react.useState)([function(item){if(!item)return item;let{picture,pictureType}=item;return{pictureType,picture:(0,libs_picture.Z)(pictureType,picture),label:pictureType}}(avatar)]),requestProfileImages=(0,react.useCallback)(async()=>{if(!(null==avatar?void 0:avatar.id))throw Error("SHOULD BE LOGIN");let{ok,result}=await (0,okky_web.getAvatarProfiles)(null==avatar?void 0:avatar.id);return!!ok&&!!result&&(setProfileImages(function(item){let{gravatar:GRAVATAR,attached:ATTACHED,oauthIdList}=item,images=[],hasOAuthProviders=void 0!==oauthIdList&&oauthIdList.length>0;return GRAVATAR&&images.push({pictureType:"GRAVATAR",picture:GRAVATAR,label:"Gravatar"}),ATTACHED&&images.push({pictureType:"ATTACHED",picture:ATTACHED,label:"Attached"}),hasOAuthProviders&&images.push(...oauthIdList.map(param=>{let{provider,picture,id}=param;return{pictureType:provider,picture:picture,label:provider,id}})),images.map(param=>{let{pictureType,picture,...rest}=param;return{...rest,pictureType,picture:(0,libs_picture.Z)(pictureType,picture)}})}(result)),!0)},[avatar]),requestGravatarImageSet=(0,react.useCallback)(async()=>{let formData=new FormData;if(!(null==avatar?void 0:avatar.id))throw Error("SHOULD BE LOGIN");let{ok}=await (0,okky_web.patchPicture)(null==avatar?void 0:avatar.id,{oauthId:0},{headers:{"Content-Type":"multipart/form-data"},body:formData});return ok?(await refreshProfile(),setSubmitting(!1),!0):(setSubmitting(!1),!1)},[avatar,refreshProfile]),requestOAuthProviderImageSet=(0,react.useCallback)(async pictureType=>{let formData=new FormData,[provider]=profileImages.filter(image=>(null==image?void 0:image.pictureType)===pictureType);if(!provider)throw Error("Unknown oauth avatar image");if(!(null==avatar?void 0:avatar.id))throw Error("SHOULD BE LOGIN");let{ok}=await (0,okky_web.patchPicture)(null==avatar?void 0:avatar.id,{oauthId:provider.id},{headers:{"Content-Type":"multipart/form-data"},body:formData});return ok?(await refreshProfile(),setSubmitting(!1),!0):(setSubmitting(!1),!1)},[avatar,refreshProfile,profileImages]),requestAttachedImageSet=(0,react.useCallback)(async()=>{if(setSubmitting(!0),!(null==avatar?void 0:avatar.id))throw Error("SHOULD BE LOGIN");let{ok}=await (0,okky_web.patchPicture)(null==avatar?void 0:avatar.id,{attached:!0},{headers:{"Content-Type":"multipart/form-data"}});return ok?(await refreshProfile(),setSubmitting(!1),!0):(setSubmitting(!1),!1)},[avatar,refreshProfile]),requestUploadedImageSet=(0,react.useCallback)(async imageFile=>{setSubmitting(!0);let formData=new FormData;if(formData.append("profileFile",imageFile),!(null==avatar?void 0:avatar.id))throw Error("SHOULD BE LOGIN");let{ok}=await (0,okky_web.patchPicture)(null==avatar?void 0:avatar.id,{oauthId:0,attached:!0},{headers:{"Content-Type":"multipart/form-data"},body:formData});return ok?(await refreshProfile(),setSubmitting(!1),!0):(setSubmitting(!1),!1)},[avatar,refreshProfile]);return{submitting,error,profileImages,requestProfileImages,requestGravatarImageSet,requestOAuthProviderImageSet,requestAttachedImageSet,requestUploadedImageSet}}(),[attachedProfileImage,setAttachedProfileImage]=(0,react.useState)(),profileFileInputRef=(0,react.createRef)(),{reset,register,setValue,handleSubmit,watch,formState:{errors,isDirty}}=(0,index_esm.cI)({resolver:(0,yup.X)(schema),defaultValues:{fullName:fullName,nickname:null==avatar?void 0:avatar.nickname,tags,dmAllowed}}),watchDMAllowed=watch("dmAllowed"),handleChangeProfileSubmit=handleSubmit(async data=>{let result=await requestChangeProfile(data);result&&reload()}),handleProfileImageAttached=(0,react.useCallback)(async event=>{let{target:{files}}=event;if(files&&files.length>0){if(files[0].size>256e3){await alert({title:"프로필 이미지 용량제한 초과",message:"프로필 이미지 파일 용량은 최대 250KB 까지만 가능합니다."});return}setAttachedProfileImage({files,blob:URL.createObjectURL(files[0])})}},[alert]),handleProfileImageSelect=(0,react.useCallback)(pictureType=>{switch(pictureType){case"GRAVATAR":requestGravatarImageSet();break;case"ATTACHED":requestAttachedImageSet();break;case"UPLOADED":(null==attachedProfileImage?void 0:attachedProfileImage.files)&&requestUploadedImageSet(attachedProfileImage.files[0]);break;case"GOOGLE":case"GITHUB":case"FACEBOOK":case"NAVER":case"KAKAO":requestOAuthProviderImageSet(pictureType);break;default:throw Error("Unknown avatar pictureType")}},[requestGravatarImageSet,requestAttachedImageSet,requestOAuthProviderImageSet,requestUploadedImageSet,attachedProfileImage]),handleProfileImageInputClick=(0,react.useCallback)(()=>{profileFileInputRef.current&&profileFileInputRef.current.click()},[profileFileInputRef]),handleTagsSet=(0,react.useCallback)(value=>{setValue("tags",value,{shouldDirty:!0})},[setValue]),handleDMAllowedSet=(0,react.useCallback)(value=>{setValue("dmAllowed",value,{shouldDirty:!0})},[setValue]);return(0,react.useEffect)(()=>(reset(),()=>{reset()}),[reset]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(header.Z,{}),(0,jsx_runtime.jsx)("main",{className:"mx-auto w-full max-w-7xl",children:(0,jsx_runtime.jsx)("div",{className:"mt-6 px-4 lg:mt-10 lg:px-0",children:(0,jsx_runtime.jsxs)("div",{className:"divide-y divide-gray-500/30 dark:divide-gray-500/70 lg:grid lg:grid-cols-12 lg:divide-x lg:divide-y-0",children:[(0,jsx_runtime.jsxs)("aside",{className:"lg:col-span-3 lg:pr-16",children:[(0,jsx_runtime.jsx)("h2",{className:"text-xl font-semibold leading-6",children:"내 계정"}),(0,jsx_runtime.jsx)(menu.Z,{})]}),(0,jsx_runtime.jsxs)("form",{className:"divide-y divide-gray-500/30 dark:divide-gray-500/70 lg:col-span-9",onSubmit:e=>e.preventDefault(),children:[(0,jsx_runtime.jsxs)("div",{className:"my-10 lg:my-0 lg:pl-20",children:[(0,jsx_runtime.jsx)("h2",{className:"text-xl font-semibold leading-6",children:"회원정보"}),(0,jsx_runtime.jsxs)("div",{className:"my-10 flex flex-col lg:flex-row",children:[(0,jsx_runtime.jsxs)("div",{className:"flex-grow space-y-6",children:[void 0!==error&&(0,jsx_runtime.jsxs)(shared_alert.WY,{title:"회원정보 수정실패",children:[error.field&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("strong",{children:error.label}),":"]})," ",error.message]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"이름"}),(0,jsx_runtime.jsx)("div",{className:"mt-1 flex",children:(0,jsx_runtime.jsx)("input",{type:"text",id:"username",autoComplete:"username",placeholder:"이름을 입력해주세요.",className:"block w-full appearance-none rounded-md border border-gray-500/30 px-3 py-2 text-sm placeholder-gray-500/80 shadow-sm focus:border-gray-500 focus:outline-none focus:ring-0 dark:bg-gray-500/20 sm:text-base",...register("fullName",{required:!0})})}),errors.fullName&&(0,jsx_runtime.jsxs)("div",{className:"mt-2 flex items-center space-x-1",children:[(0,jsx_runtime.jsx)(ExclamationCircleIcon.Z,{className:"h-4 w-4 flex-shrink-0 text-red-500","aria-hidden":"true"}),(0,jsx_runtime.jsx)("span",{className:"text-xs text-red-500",children:errors.fullName.message})]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{htmlFor:"nickname",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"닉네임"}),(0,jsx_runtime.jsx)("div",{className:"mt-1 flex",children:(0,jsx_runtime.jsx)("input",{type:"text",id:"nickname",autoComplete:"nickname",className:"block w-full appearance-none rounded-md border border-gray-500/30 px-3 py-2 text-sm placeholder-gray-500/80 shadow-sm focus:border-gray-500 focus:outline-none focus:ring-0 dark:bg-gray-500/20 sm:text-base",...register("nickname",{required:!0})})}),errors.nickname&&(0,jsx_runtime.jsxs)("div",{className:"mt-2 flex items-center space-x-1",children:[(0,jsx_runtime.jsx)(ExclamationCircleIcon.Z,{className:"h-4 w-4 flex-shrink-0 text-red-500","aria-hidden":"true"}),(0,jsx_runtime.jsx)("span",{className:"text-xs text-red-500",children:errors.nickname.message})]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{htmlFor:"nickname",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"관심있는 기술 태그 입력"}),(0,jsx_runtime.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"사용 중인 기술이나 관심있는 기술 태그를 선택해주세요."}),(0,jsx_runtime.jsx)("div",{className:"mt-1 rounded-md",children:(0,jsx_runtime.jsx)(tag_inputs.Z,{defaultValue:tags,onChange:handleTagsSet})})]})]}),(0,jsx_runtime.jsxs)("div",{className:"mt-6 flex-grow lg:ml-52 lg:mt-0 lg:shrink-0 lg:grow-0",children:[(0,jsx_runtime.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 sm:hidden","aria-hidden":"true",children:"프로필 사진"}),(0,jsx_runtime.jsxs)(popover.J,{className:"relative",children:[(0,jsx_runtime.jsx)("div",{className:"mt-1 lg:hidden",children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:[(0,jsx_runtime.jsx)("div",{className:"inline-block h-12 w-12 flex-shrink-0 overflow-hidden rounded-full","aria-hidden":"true",children:(0,jsx_runtime.jsx)(image_avatar.Z,{className:"h-full w-full rounded-full border-2 border-gray-200",src:displayImage,alt:"프로필 사진"})}),(0,jsx_runtime.jsx)("div",{className:"ml-5 rounded-md shadow-sm",children:(0,jsx_runtime.jsx)("div",{className:"group relative flex items-center justify-center rounded-md border border-gray-300 px-3 py-2 focus-within:ring-2 focus-within:ring-blue-500 focus-within:ring-offset-2 hover:bg-gray-50",children:(0,jsx_runtime.jsxs)(popover.J.Button,{children:[(0,jsx_runtime.jsxs)("label",{htmlFor:"mobile-user-photo",className:"pointer-events-none relative text-sm font-medium leading-4 text-gray-700 dark:text-gray-300",children:[(0,jsx_runtime.jsx)("span",{children:"변경"}),(0,jsx_runtime.jsx)("span",{className:"sr-only",children:"프로필 사진"})]}),(0,jsx_runtime.jsx)("input",{id:"mobile-user-photo",name:"user-photo",type:"file",className:"absolute h-full w-full cursor-pointer rounded-md border-gray-300 opacity-0",onChange:handleProfileImageAttached})]})})})]})}),(0,jsx_runtime.jsxs)("div",{className:"relative my-1 hidden overflow-hidden rounded-full lg:block",children:[(0,jsx_runtime.jsx)(image_avatar.Z,{className:"h-40 w-40 rounded-full border-2 border-gray-200",src:displayImage,alt:"프로필 사진"}),(0,jsx_runtime.jsx)(popover.J.Button,{className:"absolute inset-0",children:(0,jsx_runtime.jsxs)("label",{htmlFor:"desktop-user-photo",className:"flex h-full w-full items-center justify-center bg-gray-900 bg-opacity-75 text-sm font-medium text-gray-100 opacity-0 focus-within:opacity-100 hover:opacity-100",children:[(0,jsx_runtime.jsx)("span",{children:"변경"}),(0,jsx_runtime.jsx)("span",{className:"sr-only",children:"프로필 사진"}),(0,jsx_runtime.jsx)("input",{id:"desktop-user-photo",name:"user-photo",className:"absolute inset-0 h-full w-full cursor-pointer rounded-md border-gray-300 opacity-0"})]})})]}),(0,jsx_runtime.jsx)(transition.u,{as:react.Fragment,enter:"duration-150 ease-out",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"duration-100 ease-in",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",afterEnter:requestProfileImages,children:(0,jsx_runtime.jsx)(popover.J.Panel,{focus:!0,className:"absolute inset-x-0 top-0 z-10 w-full origin-top transform transition",children(param){let{close}=param;return(0,jsx_runtime.jsx)("div",{className:"overflow-hidden rounded-lg bg-white py-1 shadow-lg ring-1 ring-gray-900 ring-opacity-5 dark:bg-black",children:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col -space-y-2",children:[profileImages.map(image=>(0,jsx_runtime.jsx)("button",{type:"button",className:"group flex-1 cursor-pointer px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-900",onClick(){handleProfileImageSelect(null==image?void 0:image.pictureType),close()},children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,jsx_runtime.jsx)("img",{className:"h-10 w-10 shrink-0 rounded-full",src:null==image?void 0:image.picture,alt:""}),(0,jsx_runtime.jsx)("span",{className:"flex-1 text-sm",children:null==image?void 0:image.label})]})},null==image?void 0:image.label)),attachedProfileImage&&(0,jsx_runtime.jsx)("button",{type:"button",className:"group flex-1 cursor-pointer px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-900",onClick(){handleProfileImageSelect("UPLOADED"),close()},children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,jsx_runtime.jsx)("img",{className:"h-10 w-10 rounded-full",src:attachedProfileImage.blob,alt:""}),(0,jsx_runtime.jsx)("span",{className:"flex-1 text-sm",children:"Uploaded"})]})}),(0,jsx_runtime.jsx)("div",{className:"group relative flex-1 cursor-pointer px-3 py-2",children:(0,jsx_runtime.jsx)("div",{className:"mt-1 flex items-center space-x-1",children:(0,jsx_runtime.jsxs)("label",{htmlFor:"desktop-user-photo",className:"relative flex h-full w-full items-center justify-center rounded-md bg-blue-500 py-2 text-white shadow-sm hover:bg-blue-600",children:[(0,jsx_runtime.jsxs)("p",{className:"flex flex-col text-center",children:[(0,jsx_runtime.jsx)("span",{className:"text-sm font-semibold",children:"이미지 업로드"}),(0,jsx_runtime.jsxs)("span",{className:"text-xs",children:["권장 사이즈 150px",(0,jsx_runtime.jsx)("br",{}),"최대 250KB"]})]}),(0,jsx_runtime.jsx)("input",{ref:profileFileInputRef,type:"file",accept:dist.DEFAULT_SUPPORTED_IMAGE_FORMATS_STRING,id:"desktop-user-photo",name:"user-photo",className:"hidden",onChange:handleProfileImageAttached}),(0,jsx_runtime.jsx)("button",{type:"button",className:"absolute inset-0 h-full w-full cursor-pointer border-gray-300 opacity-80",onClick:handleProfileImageInputClick})]})})})]})})}})})]})]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"divide-y divide-gray-500/30 dark:divide-gray-500/70",children:[(0,jsx_runtime.jsxs)("div",{className:"my-10 lg:my-10 lg:pl-20",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h2",{className:"text-lg font-medium leading-6",children:"이메일 수신동의"}),(0,jsx_runtime.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"OKKY에서 주최하는 다양한 이벤트, 정보성 뉴스레터 및 광고 수신여부를 설정할 수 있습니다."})]}),(0,jsx_runtime.jsx)("ul",{className:"mt-2 divide-y divide-gray-500/30 dark:divide-gray-500/70",children:(0,jsx_runtime.jsxs)(switch_switch.r.Group,{as:"li",className:"flex items-center justify-between py-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-col",children:[(0,jsx_runtime.jsx)(switch_switch.r.Label,{as:"p",className:"text-sm font-medium",passive:!0,children:"뉴스레터 및 마케팅 메일 수신"}),(0,jsx_runtime.jsx)(switch_switch.r.Description,{className:"text-sm text-gray-500",children:"유저가 만드는 다양한 컨텐츠를 뉴스레터로 받습니다."})]}),(0,jsx_runtime.jsx)(switch_switch.r,{checked:watchDMAllowed,onChange:handleDMAllowedSet,className:(0,concat.z)(watchDMAllowed?"bg-blue-500":"bg-gray-200 dark:bg-gray-700","relative ml-4 inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none"),children:(0,jsx_runtime.jsx)("span",{"aria-hidden":"true",className:(0,concat.z)(watchDMAllowed?"translate-x-5":"translate-x-0","inline-block h-5 w-5 transform rounded-full bg-white/90 shadow ring-0 transition duration-200 ease-in-out")})})]})})]}),(0,jsx_runtime.jsx)("div",{className:"my-10 flex justify-end py-5 lg:my-10 lg:pl-20",children:(0,jsx_runtime.jsx)(submit_button.Z,{loading:submitting,disabled:!isDirty,onClick:handleChangeProfileSubmit,children:"저장"})})]})]})]})})}),(0,jsx_runtime.jsx)("div",{className:"relative mt-16 sm:mt-20",children:(0,jsx_runtime.jsx)(footer.Z,{})})]})}}}]);